# JWT認証アプリ

このプロジェクトはVite + Reactのフロントエンドと、FastAPIバックエンドを使用したシンプルなJWT認証システムを実装したサンプルアプリケーションです。

## セットアップ手順

### バックエンド

1. 必要なパッケージのインストール
```bash
cd backend
pip install -r requirements.txt
pip install pydantic[email]
```

2. サーバーの起動
```bash
uvicorn main:app --reload
```

### フロントエンド

1. 必要なパッケージのインストール
```bash
cd frontend
npm install
```

2. 開発サーバーの起動
```bash
npm run dev
```

## APIエンドポイント

- `POST /api/register` - ユーザー登録
- `POST /api/login` - ユーザーログイン
- `GET /api/users/me` - ユーザー情報取得

## 技術スタック

### フロントエンド
- Vite, React, JavaScript, axios

### バックエンド
- FastAPI, SQLAlchemy, PyJWT, passlib

## フォルダ構造

### バックエンド
- `main.py`: メインアプリケーション
- `auth.py`: 認証ロジック
- `models.py`: データベースモデル
- `schemas.py`: リクエスト/レスポンスモデル

### フロントエンド
- `src/components/`: Reactコンポーネント
- `src/services/`: API通信
- `src/App.jsx`: メインアプリケーション

## プロジェクト総括

このプロジェクトでは以下を実装しました。

- ユーザー登録・認証フロー
- JWTを使ったAPI通信
- 保護されたリソースへのアクセス制御

### 学んだこと

- CORS設定
- JWT管理
- APIリクエスト
- 例外処理
- ユーザー体験構築

## 次の活用

この基盤は以下に応用できます。

### 拡張機能

- ユーザープロフィール管理
- アクセス権限の階層化
- ソーシャル認証
- セキュリティ強化

### 応用例

- SaaSアプリケーション
1. ユーザーがログインすると、サーバーはJWTトークンを発行します
2. クライアントはトークンをローカルストレージに保存します
3. 保護されたリソースにアクセスする際、トークンをAuthorizationヘッダーに含めます
4. サーバーはトークンを検証し、有効であればリクエストを処理します
5. トークンの有効期限が切れると、ユーザーは再度ログインする必要があります

## フォルダ構造の説明

### バックエンド
- `main.py` - FastAPIのメインアプリケーション
- `auth.py` - 認証関連のロジックとJWT処理
- `models.py` - データベースモデル
- `schemas.py` - Pydanticスキーマ（リクエスト/レスポンスモデル）

### フロントエンド
- `src/components/` - Reactのコンポーネント
  - `Login.jsx` - ログインフォームのコンポーネント
  - `Register.jsx` - 登録フォームのコンポーネント
  - `Dashboard.jsx` - ダッシュボードのコンポーネント
- `src/services/` - APIとの通信を行うサービス
- `src/App.jsx` - メインのReactアプリケーション

## プロジェクト総括

このプロジェクトでは、モダンなウェブアプリケーション開発のベストプラクティスに基づいて以下を実装しました：

- **モダンなフロントエンド**: Vite + React を活用した高速な開発環境と効率的なUI構築
- **堅牢なバックエンド**: FastAPI による型安全なAPIエンドポイントの実装
- **安全な認証システム**: JWT（JSON Web Token）を利用したステートレスな認証
- **クリーンなコード構造**: コンポーネント分割とサービス層の分離による保守性の高い設計

### 達成したこと

1. メールアドレスとパスワードによるユーザー登録・認証フロー
2. JWTトークンを使った安全なAPI通信
3. 保護されたリソースへのアクセス制御
4. フロントエンドとバックエンドの効果的な連携

### 学んだ技術的ポイント

- CORSの適切な設定とトラブルシューティング
- JWTの生成、検証、およびクライアントでの管理
- Axiosを使ったAPIリクエストのインターセプト
- FastAPIでの例外処理とエラーレスポンスの適切な返し方
- リアクティブなユーザー体験の構築

## 次のプロジェクトへの活用

このプロジェクトで構築した基盤は、さまざまなウェブアプリケーションの開発に応用できます：

### 拡張可能な機能

1. **ユーザープロフィール管理**:
   - プロフィール画像のアップロード
   - ユーザー名やプロフィール情報の編集

2. **アクセス権限の階層化**:
   - 管理者ユーザーと一般ユーザーの区別
   - リソースへのきめ細かいアクセス制御

3. **ソーシャル認証の統合**:
   - Google、GitHub などのOAuthプロバイダとの連携
   - 既存アカウントとの紐付け

4. **セキュリティ強化**:
   - 二要素認証（2FA）の実装
   - トークンの自動更新（リフレッシュトークン）
   - レート制限によるブルートフォース攻撃の防止

### 実用アプリケーションへの応用

- **SaaSアプリケーション**: サブスクリプション管理とユーザー固有のデータ保存
- **コンテンツ管理システム**: 編集権限に基づくコンテンツ作成と公開
- **Eコマースプラットフォーム**: ユーザーアカウント、購入履歴、お気に入り機能
- **コラボレーションツール**: チームベースのアクセス制御とリソース共有

### 本番環境への展開時の考慮点

- 環境変数を使用した機密情報の管理
- HTTPSの強制とセキュリティヘッダの適切な設定
- データベースマイグレーション戦略の策定
- パフォーマンス最適化とスケーリング計画

このプロジェクトは、より複雑なアプリケーションを構築するための堅固な基盤として活用できます。JWT認証の基本的な実装をマスターすることで、より高度なユーザー管理システムや保護されたAPIの開発に必要なスキルを獲得できます。

## トラブルシューティング

### bcryptの警告について

## デスクトップアプリ化

このWebアプリをPyWebViewを使用してデスクトップアプリケーションとして実行することもできます。

### 必要な依存関係

```bash
pip install pywebview
pip install -r backend/requirements.txt
```

### デスクトップアプリのビルドと実行

1. フロントエンドのビルド
```bash
cd frontend
npm run build
```

2. デスクトップアプリの実行
```bash
python desktop_app.py
```

### パッケージング

PyInstallerを使用して単一の実行ファイルにパッケージ化できます。

```bash
pip install pyinstaller
pyinstaller --onefile --windowed desktop_app.py
```

ビルドされた実行ファイルは `dist` ディレクトリに生成されます。
